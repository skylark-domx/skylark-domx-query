/**
 * skylark-domx-query - The skylark query library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-files","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-fx","skylark-domx-scripter"],function(t,n,e,i,r,s,o,a,c,l,f){var u,h=Array.prototype.some,p=Array.prototype.push,d=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),v=(Array.prototype.map,Array.prototype.filter),m=Array.prototype.forEach,g=Array.prototype.indexOf,y=Array.prototype.sort,k=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,b=n.funcArg,w=n.isArrayLike,x=n.isString,A=n.uniq,S=n.isFunction,C=n.type,O=(n.isArray,n.isWindow,n.isDocument,n.isObject);n.isPlainObject,n.compact,n.flatten,n.camelCase,n.dasherize,o.children;function z(t,e){return function(){var i=d.call(arguments),r=n.map(this,function(n,r){return t.apply(e,[n].concat(i))});return q(A(r))}}function E(t,n,e){return function(i){d.call(arguments);var r=this.map(function(r,s){return t.apply(n,e?[s]:[s,i])});return e&&i?r.filter(i):r}}function N(t,n){return function(){var e=d.call(arguments);return this.each(function(i,r){t.apply(n,[this].concat(e))}),this}}function T(t,n,e){return function(i){var r=d.call(arguments);return m.call(this,function(s,o){b(s,i,o,e(s));t.apply(n,[s,i].concat(r.slice(1)))}),this}}function j(t,e,i){return function(r,s){var o=d.call(arguments);return n.isPlainObject(r)||n.isDefined(s)?(m.call(this,function(n,a){i&&b(n,s,a,i(n,r)),t.apply(e,[n].concat(o))}),this):this[0]?t.apply(e,[this[0],r]):void 0}}function P(t,e,i){return function(r){return n.isDefined(r)?(m.call(this,function(n,s){var o;o=i?b(n,r,s,i(n)):r,t.apply(e,[n,o])}),this):this[0]?t.apply(e,[this[0]]):void 0}}var D,W=n.klass({klassName:"SkNodeList",init:function(t,i){var r,s,a,c;if(t&&(this.context=i=i||e.doc(),x(t)?(this.selector=t,(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:k.exec(t))?r[1]?(s=e.createFragment(t),n.isPlainObject(i)&&(c=i)):(a=o.byId(r[2],e.ownerDoc(i)))&&(s=[a]):(n.isString(i)&&(i=o.find(i)),s=o.descendants(i,t))):s=t!==window&&w(t)?t:[t]),s&&(p.apply(this,s),c))for(var l in c)n.isFunction(this[l])?this[l](c[l]):this.attr(l,c[l]);return this}}),q=function(){u=function(t){return t instanceof W},init=function(t,n){return new W(t,n)};var t,s,k,b=function(t,n){if(!S(t))return u(t)?t:n&&u(n)&&x(t)?n.find(t):init(t,n);r.ready(function(){t(b)})};b.fn=W.prototype,n.mixin(b.fn,{length:0,map:function(t){return b(A(n.map(this,function(n,e){return t.call(n,e,n)})))},slice:function(){return b(d.apply(this,arguments))},forEach:function(){return m.apply(this,arguments)},get:function(t){return void 0===t?d.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return g.apply(this,arguments)},sort:function(){return y.apply(this,arguments)},toArray:function(){return d.call(this)},size:function(){return this.length},remove:function(t){return t?this.find(t).remove():(this.each(function(t,n){e.remove(n)}),this)},each:function(t){return n.each(this,t),this},filter:function(t){return S(t)?this.not(this.not(t)):b(v.call(this,function(n){return o.matches(n,t)}))},add:function(t,n){return b(A(this.toArray().concat(b(t,n).toArray())))},is:function(t){if(this.length>0){if(n.isString(t))return h.call(this,function(n){return o.matches(n,t)});if(n.isArrayLike(t))return h.call(this,function(e){return n.inArray(e,t)>-1});if(n.isHtmlNode(t))return h.call(this,function(n){return n==t})}return!1},not:function(t){var n=[];if(S(t)&&void 0!==t.call)this.each(function(e,i){t.call(this,e,i)||n.push(this)});else{var e="string"==typeof t?this.filter(t):w(t)&&S(t.item)?d.call(t):b(t);this.forEach(function(t){e.indexOf(t)<0&&n.push(t)})}return b(n)},has:function(t){return this.filter(function(){return O(t)?e.contains(this,t):b(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:E(o.descendants,o),closest:E(o.closest,o),parents:E(o.ancestors,o),parentsUntil:(t=o.ancestors,s=o,function(n,e){d.call(arguments);var i=this.map(function(i,r){return t.apply(s,k?[r,n]:[r,e,n])});return k&&e?i.filter(e):i}),parent:E(o.parent,o),children:E(o.children,o),contents:z(e.contents,e),empty:N(e.empty,e),pluck:function(t){return n.map(this,function(n){return n[t]})},pushStack:function(t){var n=b(t);return n.prevObject=this,n},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=S(t);if(this[0]&&!n)var e=b(t).get(0),i=e.parentNode||this.length>1;return this.each(function(r,s){b(this).wrapAll(n?t.call(this,r,s):i?e.cloneNode(!0):e)})},wrapAll:function(t){if(this[0]){var n;for(b(this[0]).before(t=b(t));(n=t.children()).length;)t=n.first();b(t).append(this)}return this},wrapInner:function(t){var n=S(t);return this.each(function(e,i){var r=b(this),s=r.contents(),o=n?t.call(this,e,i):t;s.length?s.wrapAll(o):r.append(o)})},unwrap:function(t){return 0===this.parent().children().length?this.parent(t).not("body").each(function(){b(this).replaceWith(document.createTextNode(this.childNodes[0].textContent))}):this.parent().each(function(){b(this).replaceWith(b(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:N(l.hide,l),toggle:function(t){return this.each(function(){var n=b(this);(void 0===t?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return b(this.pluck("previousElementSibling")).filter(t||"*")},prevAll:E(o.previousSiblings,o),next:function(t){return b(this.pluck("nextElementSibling")).filter(t||"*")},nextAll:E(o.nextSiblings,o),siblings:E(o.siblings,o),html:P(f.html,f,f.html),text:P(i.text,i,i.text),attr:j(i.attr,i,i.attr),removeAttr:N(i.removeAttr,i),prop:j(i.prop,i,i.prop),removeProp:N(i.removeProp,i),data:j(i.data,i,i.data),removeData:N(i.removeData,i),val:P(i.val,i,i.val),offset:P(a.pagePosition,a,a.pagePosition),style:j(c.css,c),css:j(c.css,c),index:function(t){return t?this.indexOf(b(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t,n){return function(){var e=d.call(arguments);return h.call(this,function(i){return t.apply(n,[i].concat(e))})}}(c.hasClass,c),addClass:T(c.addClass,c,c.className),removeClass:T(c.removeClass,c,c.className),toggleClass:T(c.toggleClass,c,c.className),scrollTop:P(a.scrollTop,a),scrollLeft:P(a.scrollLeft,a),position:function(t){if(this.length){if(t)return t.of&&t.of.length&&((t=n.clone(t)).of=t.of[0]),this.each(function(){a.posit(this,t)});var e=this[0];return a.relativePosition(e)}},offsetParent:z(a.offsetParent,a)}),b.fn.detach=b.fn.remove,b.fn.hover=function(t,n){return this.mouseenter(t).mouseleave(n||t)},b.fn.size=P(a.size,a),b.fn.width=P(a.width,a,a.width),b.fn.height=P(a.height,a,a.height),b.fn.clientSize=P(a.clientSize,a.clientSize),["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});b.fn["outer"+n]=function(n,e){if(arguments.length?"boolean"!=typeof n&&(e=n,n=!1):(n=!1,e=void 0),void 0===e){var i=this[0];if(!i)return;var r=a.size(i);if(n){var s=a.marginExtents(i);r.width=r.width+s.left+s.right,r.height=r.height+s.top+s.bottom}return"width"===t?r.width:r.height}return this.each(function(i,r){var s={},o=a.marginExtents(r);"width"===t?(s.width=e,n&&(s.width=s.width-o.left-o.right)):(s.height=e,n&&(s.height=s.height-o.top-o.bottom)),a.size(r,s)})}}),b.fn.innerWidth=P(a.clientWidth,a,a.clientWidth),b.fn.innerHeight=P(a.clientHeight,a,a.clientHeight);e.traverse;function D(t,i,r){return function(r){var s,o=n.map(arguments,function(t){return"function"==(s=C(t))||"object"==s||"array"==s||null==t?t:e.createFragment(t)});return o.length<1?this:(this.each(function(n){t.apply(i,[this,o,n>0])}),this)}}return b.fn.after=D(e.after,e),b.fn.prepend=D(e.prepend,e),b.fn.before=D(e.before,e),b.fn.append=D(e.append,e),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){b.fn[t]=function(t){for(var e,i=[],r=b(t),s=r.length-1,o=0;o<=s;o++)e=o===s?this:this.clone(!0),b(r[o])[n](e),p.apply(i,e.get());return this.pushStack(i)}}),b}();return(D=q).fn.on=N(r.on,r),D.fn.off=N(r.off,r),D.fn.trigger=N(r.trigger,r),"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error transitionEnd".split(" ").forEach(function(t){D.fn[t]=function(n,e){return 0 in arguments?this.on(t,n,e):this.trigger(t)}}),D.fn.one=function(t,e,i,r){return n.isString(e)||n.isFunction(r)||(r=i,i=e,e=null),n.isFunction(i)&&(r=i,i=null),this.on(t,e,i,r,1)},D.fn.animate=N(l.animate,l),D.fn.emulateTransitionEnd=N(l.emulateTransitionEnd,l),D.fn.show=N(l.show,l),D.fn.hide=N(l.hide,l),D.fn.toogle=N(l.toogle,l),D.fn.fadeTo=N(l.fadeTo,l),D.fn.fadeIn=N(l.fadeIn,l),D.fn.fadeOut=N(l.fadeOut,l),D.fn.fadeToggle=N(l.fadeToggle,l),D.fn.slideDown=N(l.slideDown,l),D.fn.slideToggle=N(l.slideToggle,l),D.fn.slideUp=N(l.slideUp,l),D.fn.scrollParent=function(t){var n=this.css("position"),e="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=D(this);return(!e||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:D(this[0].ownerDocument||document)},D.fn.pastezone=N(s.pastezone,s),D.fn.dropzone=N(s.dropzone,s),D.fn.picker=N(s.picker,s),function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(n){var e=t.fn[n];t.fn[n]=function(){var t=e.apply(this,arguments);return t.prevObject=this,t}})}(q),function(t){var i;t.fn.query=t.fn.find,t.fn.place=function(t,i){return n.isString(t)?t=o.descendant(t):u(t)&&(t=t[0]),this.each(function(n,r){switch(i){case"before":e.before(t,r);break;case"after":e.after(t,r);break;case"replace":e.replace(t,r);break;case"only":e.empty(t),e.append(t,r);break;case"first":e.prepend(t,r);break;default:e.append(t,r)}})},t.fn.addContent=function(t,e){return t.template&&(t=n.substitute(t.template,t)),this.append(t)},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.disableSelection=(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(i+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")},t.fn.reflow=function(){return e.flow(this[0])},t.fn.isBlockNode=function(){return e.isBlockNode(this[0])}}(q),q.fn.plugin=function(t,n){var e=d.call(arguments,1),i=this,r=this;return this.each(function(){r=plugins.instantiate.apply(i,[this,t].concat(e))}),r},t.attach("domx.query",q)});
//# sourceMappingURL=sourcemaps/query.js.map
