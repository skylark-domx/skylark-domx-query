/**
 * skylark-domx-query - The skylark query library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-fx","skylark-domx-scripter"],function(t,n,e,i,r,o,s,a,c,l){var f,u=Array.prototype.some,h=Array.prototype.push,p=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),d=(Array.prototype.map,Array.prototype.filter),v=Array.prototype.forEach,m=Array.prototype.indexOf,g=Array.prototype.sort,y=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,w=n.funcArg,k=n.isArrayLike,b=n.isString,x=n.uniq,A=n.isFunction,S=n.type,C=(n.isArray,n.isWindow,n.isDocument,n.isObject);n.isPlainObject,n.compact,n.flatten,n.camelCase,n.dasherize,o.children;function O(t,e){return function(){var i=p.call(arguments),r=n.map(this,function(n,r){return t.apply(e,[n].concat(i))});return q(x(r))}}function _(t,n,e){return function(i){p.call(arguments);var r=this.map(function(r,o){return t.apply(n,e?[o]:[o,i])});return e&&i?r.filter(i):r}}function E(t,n,e){return function(i,r){p.call(arguments);var o=this.map(function(o,s){return t.apply(n,e?[s,i]:[s,r,i])});return e&&r?o.filter(r):o}}function N(t,n){return function(){var e=p.call(arguments);return this.each(function(i,r){t.apply(n,[this].concat(e))}),this}}function T(t,n,e){return function(i){var r=p.call(arguments);return v.call(this,function(o,s){w(o,i,s,e(o));t.apply(n,[o,i].concat(r.slice(1)))}),this}}function j(t,n){return function(){var e=p.call(arguments);return u.call(this,function(i){return t.apply(n,[i].concat(e))})}}function z(t,e,i){return function(r,o){var s=p.call(arguments);return n.isPlainObject(r)||n.isDefined(o)?(v.call(this,function(n,a){i&&w(n,o,a,i(n,r)),t.apply(e,[n].concat(s))}),this):this[0]?t.apply(e,[this[0],r]):void 0}}function P(t,e,i){return function(r){return n.isDefined(r)?(v.call(this,function(n,o){var s;s=i?w(n,r,o,i(n)):r,t.apply(e,[n,s])}),this):this[0]?t.apply(e,[this[0]]):void 0}}var D,W=n.klass({klassName:"SkNodeList",init:function(t,i){var r,s,a,c;if(t&&(this.context=i=i||e.doc(),b(t)?(this.selector=t,(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:y.exec(t))?r[1]?(s=e.createFragment(t),n.isPlainObject(i)&&(c=i)):(a=o.byId(r[2],e.ownerDoc(i)))&&(s=[a]):(n.isString(i)&&(i=o.find(i)),s=o.descendants(i,t))):s=t!==window&&k(t)?t:[t]),s&&(h.apply(this,s),c))for(var l in c)n.isFunction(this[l])?this[l](c[l]):this.attr(l,c[l]);return this}}),q=function(){f=function(t){return t instanceof W},init=function(t,n){return new W(t,n)};var t=function(n,e){if(!A(n))return f(n)?n:e&&f(e)&&b(n)?e.find(n):init(n,e);r.ready(function(){n(t)})};t.fn=W.prototype,n.mixin(t.fn,{length:0,map:function(e){return t(x(n.map(this,function(t,n){return e.call(t,n,t)})))},slice:function(){return t(p.apply(this,arguments))},forEach:function(){return v.apply(this,arguments)},get:function(t){return void 0===t?p.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return m.apply(this,arguments)},sort:function(){return g.apply(this,arguments)},toArray:function(){return p.call(this)},size:function(){return this.length},remove:function(t){return t?this.find(t).remove():(this.each(function(t,n){e.remove(n)}),this)},each:function(t){return n.each(this,t),this},filter:function(n){return A(n)?this.not(this.not(n)):t(d.call(this,function(t){return o.matches(t,n)}))},add:function(n,e){return t(x(this.toArray().concat(t(n,e).toArray())))},is:function(t){if(this.length>0){if(n.isString(t))return u.call(this,function(n){return o.matches(n,t)});if(n.isArrayLike(t))return u.call(this,function(e){return n.inArray(e,t)>-1});if(n.isHtmlNode(t))return u.call(this,function(n){return n==t})}return!1},not:function(n){var e=[];if(A(n)&&void 0!==n.call)this.each(function(t,i){n.call(this,t,i)||e.push(this)});else{var i="string"==typeof n?this.filter(n):k(n)&&A(n.item)?p.call(n):t(n);this.forEach(function(t){i.indexOf(t)<0&&e.push(t)})}return t(e)},has:function(n){return this.filter(function(){return C(n)?e.contains(this,n):t(this).find(n).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:_(o.descendants,o),closest:_(o.closest,o),parents:_(o.ancestors,o),parentsUntil:E(o.ancestors,o),parent:_(o.parent,o),children:_(o.children,o),contents:O(e.contents,e),empty:N(e.empty,e),pluck:function(t){return n.map(this,function(n){return n[t]})},pushStack:function(n){var e=t(n);return e.prevObject=this,e},replaceWith:function(t){return this.before(t).remove()},wrap:function(n){var e=A(n);if(this[0]&&!e)var i=t(n).get(0),r=i.parentNode||this.length>1;return this.each(function(o,s){t(this).wrapAll(e?n.call(this,o,s):r?i.cloneNode(!0):i)})},wrapAll:function(n){if(this[0]){var e;for(t(this[0]).before(n=t(n));(e=n.children()).length;)n=e.first();t(n).append(this)}return this},wrapInner:function(n){var e=A(n);return this.each(function(i,r){var o=t(this),s=o.contents(),a=e?n.call(this,i,r):n;s.length?s.wrapAll(a):o.append(a)})},unwrap:function(n){return 0===this.parent().children().length?this.parent(n).not("body").each(function(){t(this).replaceWith(document.createTextNode(this.childNodes[0].textContent))}):this.parent().each(function(){t(this).replaceWith(t(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:N(c.hide,c),toggle:function(n){return this.each(function(){var e=t(this);(void 0===n?"none"==e.css("display"):n)?e.show():e.hide()})},prev:function(n){return t(this.pluck("previousElementSibling")).filter(n||"*")},prevAll:_(o.previousSiblings,o),next:function(n){return t(this.pluck("nextElementSibling")).filter(n||"*")},nextAll:_(o.nextSiblings,o),siblings:_(o.siblings,o),html:P(l.html,l,l.html),text:P(i.text,i,i.text),attr:z(i.attr,i,i.attr),removeAttr:N(i.removeAttr,i),prop:z(i.prop,i,i.prop),removeProp:N(i.removeProp,i),data:z(i.data,i,i.data),removeData:N(i.removeData,i),val:P(i.val,i,i.val),offset:P(s.pagePosition,s,s.pagePosition),style:z(a.css,a),css:z(a.css,a),index:function(n){return n?this.indexOf(t(n)[0]):this.parent().children().indexOf(this[0])},hasClass:j(a.hasClass,a),addClass:T(a.addClass,a,a.className),removeClass:T(a.removeClass,a,a.className),toggleClass:T(a.toggleClass,a,a.className),scrollTop:P(s.scrollTop,s),scrollLeft:P(s.scrollLeft,s),position:function(t){if(this.length){if(t)return t.of&&t.of.length&&((t=n.clone(t)).of=t.of[0]),this.each(function(){s.posit(this,t)});var e=this[0];return s.relativePosition(e)}},offsetParent:O(s.offsetParent,s)}),t.fn.detach=t.fn.remove,t.fn.hover=function(t,n){return this.mouseenter(t).mouseleave(n||t)},t.fn.size=P(s.size,s),t.fn.width=P(s.width,s,s.width),t.fn.height=P(s.height,s,s.height),t.fn.clientSize=P(s.clientSize,s.clientSize),["width","height"].forEach(function(n){var e=n.replace(/./,function(t){return t[0].toUpperCase()});t.fn["outer"+e]=function(t,e){if(arguments.length?"boolean"!=typeof t&&(e=t,t=!1):(t=!1,e=void 0),void 0===e){var i=this[0];if(!i)return;var r=s.size(i);if(t){var o=s.marginExtents(i);r.width=r.width+o.left+o.right,r.height=r.height+o.top+o.bottom}return"width"===n?r.width:r.height}return this.each(function(i,r){var o={},a=s.marginExtents(r);"width"===n?(o.width=e,t&&(o.width=o.width-a.left-a.right)):(o.height=e,t&&(o.height=o.height-a.top-a.bottom)),s.size(r,o)})}}),t.fn.innerWidth=P(s.clientWidth,s,s.clientWidth),t.fn.innerHeight=P(s.clientHeight,s,s.clientHeight);e.traverse;function y(t,i,r){return function(r){var o,s=n.map(arguments,function(t){return"function"==(o=S(t))||"object"==o||"array"==o||null==t?t:e.createFragment(t)});return s.length<1?this:(this.each(function(n){t.apply(i,[this,s,n>0])}),this)}}return t.fn.after=y(e.after,e),t.fn.prepend=y(e.prepend,e),t.fn.before=y(e.before,e),t.fn.append=y(e.append,e),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,e){t.fn[n]=function(n){for(var i,r=[],o=t(n),s=o.length-1,a=0;a<=s;a++)i=a===s?this:this.clone(!0),t(o[a])[e](i),h.apply(r,i.get());return this.pushStack(r)}}),t}();return(D=q).fn.on=N(r.on,r),D.fn.off=N(r.off,r),D.fn.trigger=N(r.trigger,r),"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error transitionEnd".split(" ").forEach(function(t){D.fn[t]=function(n,e){return 0 in arguments?this.on(t,n,e):this.trigger(t)}}),D.fn.one=function(t,e,i,r){return n.isString(e)||n.isFunction(r)||(r=i,i=e,e=null),n.isFunction(i)&&(r=i,i=null),this.on(t,e,i,r,1)},D.fn.animate=N(c.animate,c),D.fn.emulateTransitionEnd=N(c.emulateTransitionEnd,c),D.fn.show=N(c.show,c),D.fn.hide=N(c.hide,c),D.fn.toogle=N(c.toogle,c),D.fn.fadeTo=N(c.fadeTo,c),D.fn.fadeIn=N(c.fadeIn,c),D.fn.fadeOut=N(c.fadeOut,c),D.fn.fadeToggle=N(c.fadeToggle,c),D.fn.slideDown=N(c.slideDown,c),D.fn.slideToggle=N(c.slideToggle,c),D.fn.slideUp=N(c.slideUp,c),D.fn.scrollParent=function(t){var n=this.css("position"),e="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=D(this);return(!e||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:D(this[0].ownerDocument||document)},function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(n){var e=t.fn[n];t.fn[n]=function(){var t=e.apply(this,arguments);return t.prevObject=this,t}})}(q),function(t){var i;t.fn.query=t.fn.find,t.fn.place=function(t,i){return n.isString(t)?t=o.descendant(t):f(t)&&(t=t[0]),this.each(function(n,r){switch(i){case"before":e.before(t,r);break;case"after":e.after(t,r);break;case"replace":e.replace(t,r);break;case"only":e.empty(t),e.append(t,r);break;case"first":e.prepend(t,r);break;default:e.append(t,r)}})},t.fn.addContent=function(t,e){return t.template&&(t=n.substitute(t.template,t)),this.append(t)},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.disableSelection=(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(i+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")},t.fn.reflow=function(){return e.flow(this[0])},t.fn.isBlockNode=function(){return e.isBlockNode(this[0])}}(q),q.fn.plugin=function(t,n){var e=p.call(arguments,1),i=this,r=this;return this.each(function(){r=plugins.instantiate.apply(i,[this,t].concat(e))}),r},q.wraps={wrapper_node_operation:wrapper_node_operation,wrapper_map:O,wrapper_value:P,wrapper_selector:_,wrapper_some_chk:j,wrapper_selector_until:E,wrapper_every_act_firstArgFunc:T,wrapper_every_act:N,wrapper_name_value:z},t.attach("domx.query",q)});
//# sourceMappingURL=sourcemaps/query.js.map
