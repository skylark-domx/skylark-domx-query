/**
 * skylark-domx-query - The skylark query library for dom api extension.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-fx","skylark-domx-scripter"],function(t,n,e,i,r,s,o,a,c,l){var f,u=Array.prototype.some,h=Array.prototype.push,p=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),d=(Array.prototype.map,Array.prototype.filter),v=Array.prototype.forEach,g=Array.prototype.indexOf,m=Array.prototype.sort,y=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=n.funcArg,b=n.isArrayLike,w=n.isString,x=n.uniq,A=n.isFunction,S=n.type,C=(n.isArray,n.isWindow,n.isDocument,n.isObject);n.isPlainObject,n.compact,n.flatten,n.camelCase,n.dasherize,s.children;function O(t,e){return function(){var i=p.call(arguments),r=n.map(this,function(n,r){return t.apply(e,[n].concat(i))});return W(x(r))}}function E(t,n,e){return function(i){p.call(arguments);var r=this.map(function(r,s){return t.apply(n,e?[s]:[s,i])});return e&&i?r.filter(i):r}}function N(t,n){return function(){var e=p.call(arguments);return this.each(function(i,r){t.apply(n,[this].concat(e))}),this}}function T(t,n,e){return function(i){var r=p.call(arguments);return v.call(this,function(s,o){k(s,i,o,e(s));t.apply(n,[s,i].concat(r.slice(1)))}),this}}function j(t,e,i){return function(r,s){var o=p.call(arguments);return n.isPlainObject(r)||n.isDefined(s)?(v.call(this,function(n,a){i&&k(n,s,a,i(n,r)),t.apply(e,[n].concat(o))}),this):this[0]?t.apply(e,[this[0],r]):void 0}}function z(t,e,i){return function(r){return n.isDefined(r)?(v.call(this,function(n,s){var o;o=i?k(n,r,s,i(n)):r,t.apply(e,[n,o])}),this):this[0]?t.apply(e,[this[0]]):void 0}}var P,D=n.klass({klassName:"SkNodeList",init:function(t,i){var r,o,a,c;if(t&&(this.context=i=i||e.doc(),w(t)?(this.selector=t,(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:y.exec(t))?r[1]?(o=e.createFragment(t),n.isPlainObject(i)&&(c=i)):(a=s.byId(r[2],e.ownerDoc(i)))&&(o=[a]):(n.isString(i)&&(i=s.find(i)),o=s.descendants(i,t))):o=t!==window&&b(t)?t:[t]),o&&(h.apply(this,o),c))for(var l in c)n.isFunction(this[l])?this[l](c[l]):this.attr(l,c[l]);return this}}),W=function(){f=function(t){return t instanceof D},init=function(t,n){return new D(t,n)};var t,y,k,P=function(t,n){if(!A(t))return f(t)?t:n&&f(n)&&w(t)?n.find(t):init(t,n);r.ready(function(){t(P)})};P.fn=D.prototype,n.mixin(P.fn,{length:0,map:function(t){return P(x(n.map(this,function(n,e){return t.call(n,e,n)})))},slice:function(){return P(p.apply(this,arguments))},forEach:function(){return v.apply(this,arguments)},get:function(t){return void 0===t?p.call(this):this[t>=0?t:t+this.length]},indexOf:function(){return g.apply(this,arguments)},sort:function(){return m.apply(this,arguments)},toArray:function(){return p.call(this)},size:function(){return this.length},remove:function(t){return t?this.find(t).remove():(this.each(function(t,n){e.remove(n)}),this)},each:function(t){return n.each(this,t),this},filter:function(t){return A(t)?this.not(this.not(t)):P(d.call(this,function(n){return s.matches(n,t)}))},add:function(t,n){return P(x(this.toArray().concat(P(t,n).toArray())))},is:function(t){if(this.length>0){if(n.isString(t))return u.call(this,function(n){return s.matches(n,t)});if(n.isArrayLike(t))return u.call(this,function(e){return n.inArray(e,t)>-1});if(n.isHtmlNode(t))return u.call(this,function(n){return n==t})}return!1},not:function(t){var n=[];if(A(t)&&void 0!==t.call)this.each(function(e,i){t.call(this,e,i)||n.push(this)});else{var e="string"==typeof t?this.filter(t):b(t)&&A(t.item)?p.call(t):P(t);this.forEach(function(t){e.indexOf(t)<0&&n.push(t)})}return P(n)},has:function(t){return this.filter(function(){return C(t)?e.contains(this,t):P(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:E(s.descendants,s),closest:E(s.closest,s),parents:E(s.ancestors,s),parentsUntil:(t=s.ancestors,y=s,function(n,e){p.call(arguments);var i=this.map(function(i,r){return t.apply(y,k?[r,n]:[r,e,n])});return k&&e?i.filter(e):i}),parent:E(s.parent,s),children:E(s.children,s),contents:O(e.contents,e),empty:N(e.empty,e),pluck:function(t){return n.map(this,function(n){return n[t]})},pushStack:function(t){var n=P(t);return n.prevObject=this,n},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=A(t);if(this[0]&&!n)var e=P(t).get(0),i=e.parentNode||this.length>1;return this.each(function(r,s){P(this).wrapAll(n?t.call(this,r,s):i?e.cloneNode(!0):e)})},wrapAll:function(t){if(this[0]){var n;for(P(this[0]).before(t=P(t));(n=t.children()).length;)t=n.first();P(t).append(this)}return this},wrapInner:function(t){var n=A(t);return this.each(function(e,i){var r=P(this),s=r.contents(),o=n?t.call(this,e,i):t;s.length?s.wrapAll(o):r.append(o)})},unwrap:function(t){return 0===this.parent().children().length?this.parent(t).not("body").each(function(){P(this).replaceWith(document.createTextNode(this.childNodes[0].textContent))}):this.parent().each(function(){P(this).replaceWith(P(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:N(c.hide,c),toggle:function(t){return this.each(function(){var n=P(this);(void 0===t?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return P(this.pluck("previousElementSibling")).filter(t||"*")},prevAll:E(s.previousSiblings,s),next:function(t){return P(this.pluck("nextElementSibling")).filter(t||"*")},nextAll:E(s.nextSiblings,s),siblings:E(s.siblings,s),html:z(l.html,l,l.html),text:z(i.text,i,i.text),attr:j(i.attr,i,i.attr),removeAttr:N(i.removeAttr,i),prop:j(i.prop,i,i.prop),removeProp:N(i.removeProp,i),data:j(i.data,i,i.data),removeData:N(i.removeData,i),val:z(i.val,i,i.val),offset:z(o.pagePosition,o,o.pagePosition),style:j(a.css,a),css:j(a.css,a),index:function(t){return t?this.indexOf(P(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t,n){return function(){var e=p.call(arguments);return u.call(this,function(i){return t.apply(n,[i].concat(e))})}}(a.hasClass,a),addClass:T(a.addClass,a,a.className),removeClass:T(a.removeClass,a,a.className),toggleClass:T(a.toggleClass,a,a.className),scrollTop:z(o.scrollTop,o),scrollLeft:z(o.scrollLeft,o),position:function(t){if(this.length){if(t)return t.of&&t.of.length&&((t=n.clone(t)).of=t.of[0]),this.each(function(){o.posit(this,t)});var e=this[0];return o.relativePosition(e)}},offsetParent:O(o.offsetParent,o)}),P.fn.detach=P.fn.remove,P.fn.hover=function(t,n){return this.mouseenter(t).mouseleave(n||t)},P.fn.size=z(o.size,o),P.fn.width=z(o.width,o,o.width),P.fn.height=z(o.height,o,o.height),P.fn.clientSize=z(o.clientSize,o.clientSize),["width","height"].forEach(function(t){var n=t.replace(/./,function(t){return t[0].toUpperCase()});P.fn["outer"+n]=function(n,e){if(arguments.length?"boolean"!=typeof n&&(e=n,n=!1):(n=!1,e=void 0),void 0===e){var i=this[0];if(!i)return;var r=o.size(i);if(n){var s=o.marginExtents(i);r.width=r.width+s.left+s.right,r.height=r.height+s.top+s.bottom}return"width"===t?r.width:r.height}return this.each(function(i,r){var s={},a=o.marginExtents(r);"width"===t?(s.width=e,n&&(s.width=s.width-a.left-a.right)):(s.height=e,n&&(s.height=s.height-a.top-a.bottom)),o.size(r,s)})}}),P.fn.innerWidth=z(o.clientWidth,o,o.clientWidth),P.fn.innerHeight=z(o.clientHeight,o,o.clientHeight);e.traverse;function W(t,i,r){return function(r){var s,o=n.map(arguments,function(t){return"function"==(s=S(t))||"object"==s||"array"==s||null==t?t:e.createFragment(t)});return o.length<1?this:(this.each(function(n){t.apply(i,[this,o,n>0])}),this)}}return P.fn.after=W(e.after,e),P.fn.prepend=W(e.prepend,e),P.fn.before=W(e.before,e),P.fn.append=W(e.append,e),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){P.fn[t]=function(t){for(var e,i=[],r=P(t),s=r.length-1,o=0;o<=s;o++)e=o===s?this:this.clone(!0),P(r[o])[n](e),h.apply(i,e.get());return this.pushStack(i)}}),P}();return(P=W).fn.on=N(r.on,r),P.fn.off=N(r.off,r),P.fn.trigger=N(r.trigger,r),"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error transitionEnd".split(" ").forEach(function(t){P.fn[t]=function(n,e){return 0 in arguments?this.on(t,n,e):this.trigger(t)}}),P.fn.one=function(t,e,i,r){return n.isString(e)||n.isFunction(r)||(r=i,i=e,e=null),n.isFunction(i)&&(r=i,i=null),this.on(t,e,i,r,1)},P.fn.animate=N(c.animate,c),P.fn.emulateTransitionEnd=N(c.emulateTransitionEnd,c),P.fn.show=N(c.show,c),P.fn.hide=N(c.hide,c),P.fn.toogle=N(c.toogle,c),P.fn.fadeTo=N(c.fadeTo,c),P.fn.fadeIn=N(c.fadeIn,c),P.fn.fadeOut=N(c.fadeOut,c),P.fn.fadeToggle=N(c.fadeToggle,c),P.fn.slideDown=N(c.slideDown,c),P.fn.slideToggle=N(c.slideToggle,c),P.fn.slideUp=N(c.slideUp,c),P.fn.scrollParent=function(t){var n=this.css("position"),e="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=P(this);return(!e||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:P(this[0].ownerDocument||document)},function(t){t.fn.end=function(){return this.prevObject||t()},t.fn.andSelf=function(){return this.add(this.prevObject||t())},t.fn.addBack=function(t){return this.prevObject?t?this.add(this.prevObject.filter(t)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(n){var e=t.fn[n];t.fn[n]=function(){var t=e.apply(this,arguments);return t.prevObject=this,t}})}(W),function(t){var i;t.fn.query=t.fn.find,t.fn.place=function(t,i){return n.isString(t)?t=s.descendant(t):f(t)&&(t=t[0]),this.each(function(n,r){switch(i){case"before":e.before(t,r);break;case"after":e.after(t,r);break;case"replace":e.replace(t,r);break;case"only":e.empty(t),e.append(t,r);break;case"first":e.prepend(t,r);break;default:e.append(t,r)}})},t.fn.addContent=function(t,e){return t.template&&(t=n.substitute(t.template,t)),this.append(t)},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.replaceClass=function(t,n){return this.removeClass(n),this.addClass(t),this},t.fn.disableSelection=(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(i+".ui-disableSelection",function(t){t.preventDefault()})}),t.fn.enableSelection=function(){return this.off(".ui-disableSelection")},t.fn.reflow=function(){return e.flow(this[0])},t.fn.isBlockNode=function(){return e.isBlockNode(this[0])}}(W),W.fn.plugin=function(t,n){var e=p.call(arguments,1),i=this,r=this;return this.each(function(){r=plugins.instantiate.apply(i,[this,t].concat(e))}),r},t.attach("domx.query",W)});
//# sourceMappingURL=sourcemaps/query.js.map
